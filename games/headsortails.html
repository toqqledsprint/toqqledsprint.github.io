<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kopf oder Zahl</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
    <link rel="icon" type="image/vnd.microsoft.icon" href="../img/favicon.ico">

</head>
<body>
    <div class="starfield" id="starfield"></div>
    <div class="page-layout">
        <aside class="sidebar">
            <h1><a href="games.html">Spiele</a></h1>
            <nav class="game-nav" aria-label="Spieleauswahl">
                <ul>
                    <li><a href="wheel.html" class="game-nav-btn">üé° Gl√ºcksrad</a></li>
                    <li><a href="randomgenerator.html" class="game-nav-btn">üé≤ Zufallszahl</a></li>
                    <li><a href="headsortails.html" class="game-nav-btn">ü™ô Kopf oder Zahl</a></li>
                    <li><a href="slotmachine.html" class="game-nav-btn">üé∞ Slotmaschine</a></li>
                    <li><a href="lotto.html" class="game-nav-btn">üéØ Lotto</a></li>
                    <li><a href="blackjack.html" class="game-nav-btn">üÉè Blackjack</a></li>
                    <li><a href="guesstheflag.html" class="game-nav-btn">üåç Errate die Flagge</a></li>
                    <li><a href="guessthenumber.html" class="game-nav-btn">üî¢ Errate die Zahl</a></li>
                </ul>
            </nav>
        </aside>
        <main class="main-content" role="main">
            <div class="game-container">
                <section id="coin" class="game">
                    <div class="coin-container">
                        <div class="coin-wrapper">
                            <div class="coin" id="coinElement">
                                <!-- Dynamically generated by JS -->
                            </div>
                            <div class="coin-shadow"></div>
                        </div>
                    </div>
                    <div id="coin-result"></div>
                    <button type="button" onclick="flipCoin()" id="flipCoinBtn">ü™ô Werfen</button>
                </section>
            </div>
        </main>
    </div>

    <script>
        // --- Universal Page Script ---
        const starfield = document.getElementById('starfield');
        const starCount = 120;
        for (let i = 0; i < starCount; i++) {
            const star = document.createElement('div');
            star.classList.add('star');
            const size = Math.random() * 3 + 1 + 'px';
            star.style.width = size;
            star.style.height = size;
            star.style.top = Math.random() * 100 + '%';
            star.style.left = Math.random() * 100 + '%';
            star.style.animationDelay = (Math.random() * 4) + 's';
            starfield.appendChild(star);
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            const currentPage = window.location.pathname.split('/').pop();
            document.querySelector(`.game-nav-btn[href="${currentPage}"]`)?.classList.add('active');
            
            // --- Kopf oder Zahl Initialisierung ---
            // Du musst ggf. die Pfade zu den Bildern anpassen (z.B. "img/kopf.png")
            setup3DCoin();
        });

        // --- Kopf oder Zahl Script ---
        let coinRotation = 0;
        let isCoinFlipping = false;
        const coin = document.getElementById("coinElement");
        const flipCoinBtn = document.getElementById("flipCoinBtn");
        const coinResultDiv = document.getElementById("coin-result");
        const COIN_THICKNESS = 16;

        function setup3DCoin() {
            coin.innerHTML = '';
            const head = document.createElement('div');
            head.classList.add('side', 'head');
            head.innerHTML = `<img src="../img/head.png" alt="Kopf" />`; 
            coin.appendChild(head);
            for (let i = 0; i < COIN_THICKNESS; i++) {
                const edge = document.createElement('div');
                edge.classList.add('edge');
                edge.style.transform = `translateZ(${(i - COIN_THICKNESS / 2) + 0.5}px)`;
                coin.appendChild(edge);
            }
            const tail = document.createElement('div');
            tail.classList.add('side', 'tail');
            tail.innerHTML = `<img src="../img/tail.png" alt="Zahl" />`;
            coin.appendChild(tail);
        }

        function flipCoin() {
            if (isCoinFlipping) return;
            isCoinFlipping = true;
            flipCoinBtn.disabled = true;
            coinResultDiv.textContent = "";
            const isKopf = Math.random() < 0.5;
            const randomSpins = Math.floor(Math.random() * 4) + 6;
            const finalRotationValue = coinRotation + (randomSpins * 360) + (isKopf ? 0 : 180);
            coin.style.setProperty('--start-rot', coinRotation + 'deg');
            coin.style.setProperty('--final-rot', finalRotationValue + 'deg');
            coin.style.transform = '';
            coin.classList.add('flipping');
            coin.addEventListener('animationend', () => {
                coin.classList.remove('flipping');
                coinRotation = finalRotationValue;
                coin.style.transform = `rotateX(-15deg) rotateY(${coinRotation}deg)`;
                isCoinFlipping = false;
                flipCoinBtn.disabled = false;
            }, { once: true });
        }
    </script>
</body>
</html>